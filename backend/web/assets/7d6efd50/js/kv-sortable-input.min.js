/*!
 * @copyright Copyright &copy; Kartik Visweswaran, Krajee.com, 2014
 * @version 1.2.0
 *
 * JQuery Plugin for yii2-sortable-input.
 * 
 * Author: Kartik Visweswaran
 * Copyright: 2014, Kartik Visweswaran, Krajee.com
 * For more JQuery plugins visit http://plugins.krajee.com
 * For more Yii related demos visit http://demos.krajee.com
 */!function(t){var e=function(e,n){this.$element=t(e),this.options=n,this.init(n),this.listen()};e.prototype={constructor:e,init:function(e){var n=this;n.$sortable=t("#"+e.sortableId),n.delimiter=e.delimiter,n.$form=n.$element.closest("form"),n.initialValue=n.getKeys(),n.initialContent=n.$sortable.html(),n.$element.val(n.initialValue)},listen:function(){var e=this;e.$sortable.on("sortupdate",function(n,i){var a=i.startparent,r=a.attr("id");if(r!=e.$sortable.attr("id")){var l=t("input[data-sortable='"+a.attr("id")+"']");l.val(e.getKeys(a))}e.$element.val(e.getKeys()),e.$element.trigger("change")}),e.$form.on("reset",function(){setTimeout(function(){e.$sortable.html(e.initialContent),e.$sortable.sortable(e.options),e.$element.val(e.initialValue)},300)})},getKeys:function(){var e=this,n=arguments.length>0?arguments[0]:e.$sortable;return n.find("li").map(function(e,n){return t(n).data("key")}).get().join(e.delimiter)}},t.fn.sortableInput=function(n){var i=Array.apply(null,arguments);return i.shift(),this.each(function(){var a=t(this),r=a.data("sortableInput"),l="object"==typeof n&&n;r||a.data("sortableInput",r=new e(this,t.extend({},t.fn.sortableInput.defaults,l,t(this).data()))),"string"==typeof n&&r[n].apply(r,i)})},t.fn.sortableInput.defaults={sortableId:"",delimiter:","}}(jQuery);